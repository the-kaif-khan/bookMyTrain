<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>forgotting user pass page</title>
  
  <link rel="stylesheet" href="/stylesheets/homePagesCSS/forgottingPassPage.css">

        <!-- google translate hidden element (head) -->
<div id="google_translate_element" style="display:none;"></div>

<script>
  function googleTranslateElementInit() {
    new google.translate.TranslateElement({
      pageLanguage: 'en',
      includedLanguages: 'en,hi,bn,ur,ta,te,pa,gu,ml,mr,it',
      autoDisplay: false,
    }, 'google_translate_element');
      // for movement of main-navbar to some bottom...
  function checkGoogleTranslateBanner() {
    const banner = document.querySelector('.goog-te-banner-frame');
    const body = document.body;
    if(banner && banner.style.display !== 'none') {
      body.classList.add('translate-active');
    } else {
      body.classList.remove('translate-active');
    }
  }
  const observer = new MutationObserver(checkGoogleTranslateBanner);
  observer.observe(document.body, { childList: true, subtree: true });
  setInterval(checkGoogleTranslateBanner, 1000);
  }

  
</script>
<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

</head>
<body>

  <div class="header">
    <div class="headerTitle">
      Welcome to <span>landbook.com</span>
    </div>
  </div>
  <div class="pageHeading">
    User's forgotting password page
  </div>


  <div class="aboutContainer">
    <div class="about1">
      You have successfully given correct information about your <span class="logo">Landbook</span> account. Now you can enter your new password for your account which is linked to <span class="skip"><%= user.email %></span>.
    </div>
    <div class="skipLink">
      <div class="link">
        <a href="/home/login">Back to login page</a> 
      </div>
    </div>
    <!-- <div class="about2">
      Customers can click <span class="skip">Back to login page</span> if they remembered their initial <span class="logo">Landbook</span> account password. Otherwise, Users have to enter their username, contact number given, email account to recover their account and make a new password with same initial information eg. same username, contact number, email account if they want or they can change any given information too.
    </div> -->
  </div>

  <% if(error.length > 0) { %>
    <div class="flash flash-error">
      <%= error %>
    </div>
  <% } %>
  <% if(success.length > 0) { %>
    <div class="flash flash-success">
      <%= success %>
    </div>
  <% } %>

  <div class="loginBox">
    <div class="title">
      Enter correct details in order to Forgot password
    </div>
    <form action="/us/user/forgottedPassword" method="post" onsubmit="return validatePassword()">
      <input type="userName" placeholder="Enter your username" class="username" name="username" required>
      <input type="password" minlength="5" placeholder="Create password" class="password" name="password" required>
      <input type="password" minlength="5" placeholder="Re-enter Password" class="password" name="confirmPassword" required>
      <input type="submit" value="Change password" class="login">
    </form>
  </div>

  <div class="footer">
    <div class="footers">
      <a href="/home/aboutus" class="footerLinks">
        Contact us
      </a>
    </div>
    <div class="footers">
      <a href="/home/aboutus" class="footerLinks">
        About us
      </a>
    </div>
  </div>

  <script>
    function validatePassword() {
      const input = document.getElementById('password');
      const errorMsg = document.getElementById('errorMsg');
      if(input.value.length > 5) {
        errorMsg.textContent = 'Password must be at least 5 characters long.';
        return false;
      }
      return true;
    }

    document.querySelector('form').addEventListener('submit', (e) => {
      const password = document.querySelector('input[name="password"]').value;
      const confirmPassword = document.querySelector('input[name="confirmPassword"]').value;

      if(password !== confirmPassword) {
        e.preventDefault();
        alert('Passwords do not match!');
      }
    });
  </script>


  <select id="languageSelect language-select">
    <option value="en">English</option>
    <option value="hi">हिन्दी</option>
    <option value="bn">বাংলা</option>
    <option value="ur">اردو</option>
    <option value="ta">தமிழ்</option>
    <option value="te">తెలుగు</option>
    <option value="pa">ਪੰਜਾਬੀ</option>
    <option value="gu">ગુજરાતી</option>
    <option value="ml">മലയാളം</option>
    <option value="mr">मराठी</option>
    <option value="it">Italiano</option>
  </select>
<script>
    // for language translation
    // for new language translation
(function() {
  const SELECT_IDS = ['languageSelectMain', 'languageSelectSide']; // IDs of both dropdowns
  const STORAGE_KEY = 'preferredLanguage';
  const defaultSourceLang = 'en';

  function setCookie(name, value, days, path = '/') {
    const d = new Date();
    d.setTime(d.getTime() + (days*24*60*60*1000));
    document.cookie = `${name}=${value};expires=${d.toUTCString()};path=${path}`;
  }

  function getCookie(name) {
    const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
    return match ? decodeURIComponent(match[2]) : null;
  }

  function currentLangFromCookie() {
    const c = getCookie('googtrans');
    if (!c) return defaultSourceLang;
    const parts = c.split('/');
    return parts[2] || defaultSourceLang;
  }

  function trySetComboLang(lang) {
    const combo = document.querySelector('.goog-te-combo');
    if (combo) {
      if (combo.value !== lang) {
        combo.value = lang;
        combo.dispatchEvent(new Event('change'));
        console.log('Translate combo switched →', lang);
      } else {
        console.log('Language already active →', lang);
      }
      return true;
    }
    return false;
  }

  function fallbackSetLang(lang) {
    try {
      setCookie('googtrans', `/${defaultSourceLang}/${lang}`, 365, '/');
      setCookie('googtrans', `/${defaultSourceLang}/${lang}`, 365, '/');
      window.location.reload();
    } catch (e) {
      console.error('fallbackSetLang error', e);
    }
  }

  function setLanguage(lang) {
    localStorage.setItem(STORAGE_KEY, lang);
    const current = currentLangFromCookie();
    if (current === lang) {
      console.log('Skip re-translate (already', lang, ')');
      return;
    }

    let attempts = 0;
    const maxAttempts = 25;
    const interval = setInterval(() => {
      attempts++;
      const done = trySetComboLang(lang);
      if (done) {
        clearInterval(interval);
        return;
      }
      if (attempts >= maxAttempts) {
        clearInterval(interval);
        console.warn('Combo not found, fallback to cookie');
        fallbackSetLang(lang);
      }
    }, 100);
  }

  function initSelectors() {
    // get both selects
    const selects = SELECT_IDS.map(id => document.getElementById(id)).filter(Boolean);
    if (!selects.length) return;

    // restore saved
    const saved = localStorage.getItem(STORAGE_KEY);
    if (saved) {
      selects.forEach(sel => sel.value = saved);
      const current = currentLangFromCookie();
      if (current !== saved) {
        setLanguage(saved);
      }
    }

    // listen for changes on each select
    selects.forEach(sel => {
      sel.addEventListener('change', function() {
        const lang = this.value;

        // sync both dropdowns instantly
        selects.forEach(s => {
          if (s.value !== lang) s.value = lang;
        });

        // apply and save language
        setLanguage(lang);
      });
    });
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initSelectors);
  } else {
    initSelectors();
  }
})();
</script>


</body>
</html>