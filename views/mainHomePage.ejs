<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>main home page</title>

  <link rel="stylesheet" href="/stylesheets/homePagesCSS/main-home-body-page.css">
  <link rel="stylesheet" href="/stylesheets/homePagesCSS/main-home-containers-page.css">
  <link rel="stylesheet" href="/stylesheets/homePagesCSS/main-home-header-page.css">
  <link rel="stylesheet" href="/stylesheets/homePagesCSS/main-home-footer-page.css">

  <link rel="stylesheet" href="/stylesheets/homePagesCSS/main-home-different-states-background.css">
  <link rel="stylesheet" href="/stylesheets/homePagesCSS/main-home-carousel-product.css">


<!-- google translate hidden element (head) -->
<div id="google_translate_element" style="display:none;"></div>

<script>
  function googleTranslateElementInit() {
    new google.translate.TranslateElement({
      pageLanguage: 'en',
      includedLanguages: 'en,hi,bn,ur,ta,te,pa,gu,ml,mr,it',
      autoDisplay: false,
    }, 'google_translate_element');
      // for movement of main-navbar to some bottom...
  function checkGoogleTranslateBanner() {
    const banner = document.querySelector('.goog-te-banner-frame');
    const body = document.body;
    if(banner && banner.style.display !== 'none') {
      body.classList.add('translate-active');
    } else {
      body.classList.remove('translate-active');
    }
  }
  const observer = new MutationObserver(checkGoogleTranslateBanner);
  observer.observe(document.body, { childList: true, subtree: true });
  setInterval(checkGoogleTranslateBanner, 1000);
  }

  
</script>
<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

</head>
<body>
  <!-- header container -->
    <nav class="main-navbar">
      <div class="leftHeader">
        <a href="/home/login"><img src="/imagesAndVideos/Logos/LOGO/banner2.png" alt=""></a> 
      </div>
      <button class="hamburger" onclick="toggleSidebar()">
        &#9776
      </button>
      <div class="hamburgerNotification">
        <% if (currentUser) { %>
          <%= currentUser.buyingMessageFromLandbook.filter(m => !m.read).length + currentUser.sellingMessageFromLandbook.filter(m => !m.read).length + currentUser.claimedMessageFromLandbook.filter(m => !m.read).length + currentUser.buyingCartTimerId.length %>
        <% } else { %>
          0
        <% } %>
      </div>
      <div class="headerContent">
        <div class="middleHeader">
          <form action="/home/search/basti/bastisadar" method="GET">
            <input type="text" name="q" placeholder="Search Landbook" class="searchInput" required>
            <button class="searchButton" type="submit">
              <img src="/imagesAndVideos/Logos/Search Icon.svg" alt="">
              <div class="tooltip">
                Search
              </div>
            </button>
          </form>
        <button class="voiceButton" id="micBtnMain">
          <img src="/imagesAndVideos/Logos/voiceIcon1 (1).png" alt="">
          <div class="tooltip">
            Search with your voice
          </div>
          <div id="voiceOverlay">
            <div id="voiceText">
            </div>
          </div>
        </button>
        <select id="languageSelectMain" class="language-select">
          <option value="en">ğŸŒ English</option>
          <option value="hi">ğŸŒ à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>
          <option value="bn">ğŸŒ à¦¬à¦¾à¦‚à¦²à¦¾</option>
          <option value="ur">ğŸŒ Ø§Ø±Ø¯Ùˆ</option>
          <option value="ta">ğŸŒ à®¤à®®à®¿à®´à¯</option>
          <option value="te">ğŸŒ à°¤à±†à°²à±à°—à±</option>
          <option value="pa">ğŸŒ à¨ªà©°à¨œà¨¾à¨¬à©€</option>
          <option value="gu">ğŸŒ àª—à«àªœàª°àª¾àª¤à«€</option>
          <option value="ml">ğŸŒ à´®à´²à´¯à´¾à´³à´‚</option>
          <option value="mr">ğŸŒ à¤®à¤°à¤¾à¤ à¥€</option>
          <option value="it">ğŸŒ Italiano</option>
        </select>
      </div>
      <div class="rightHeader">

         <!-- <div class="profileIcon">
            <a href="/us/user/notification">
              <button class="profileButton">
                <img src="/imagesAndVideos/Logos/notification2.jpg" alt="">
                <div class="tooltip">
                  Notifications
                </div>
                <div class="notification">
                  <% if (currentUser) { %>
                    <% if(currentUser.notifications.length > 9) { %>
                      9+
                    <% } else { %>
                      <%= currentUser.notifications.length %>
                    <% } %>
                  <% } else { %>
                    0
                  <% } %>
                </div>
              </button> 
            </a>
          </div> -->
          <div class="profileIcon">
            <a href="/us/user/profile">
              <button class="profileButton">
                <img src="/imagesAndVideos/Logos/User profile icon.svg" alt="">
                <div class="tooltip">
                  Your Profile
                </div>
              </button> 
            </a>
            <div class="profileNotification">
              <% if (currentUser) { %>
                <%= currentUser.buyingMessageFromLandbook.filter(m => !m.read).length + currentUser.sellingMessageFromLandbook.filter(m => !m.read).length + currentUser.claimedMessageFromLandbook.filter(m => !m.read).length + currentUser.buyingCartTimerId.length %>
              <% } else { %>
                0
              <% } %>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <div id="sidebar" class="sidebar">
      <div class="sidebarTops">
        <button class="close-btn" onclick="toggleSidebar()">
          &times;
        </button>
        <!-- <div class="profileIcon">
          <a href="/us/user/notification">
            <button class="profileButton">
              <img src="/imagesAndVideos/Logos/notification2.jpg" alt="">
              <div class="sideTooltip">
                Notifications
              </div>
              <div class="notification">
                <% if (currentUser) { %>
                  <% if(currentUser.notifications.length > 9) { %>
                    9+
                  <% } else { %>
                    <%= currentUser.notifications.length %>
                  <% } %>
                <% } else { %>
                  0
                <% } %>
              </div>
            </button> 
          </a>
        </div> -->
        <div class="profileIcon">
          <a href="/us/user/profile">
            <button class="profileButton">
              <img src="/imagesAndVideos/Logos/User profile icon.svg" alt="">
              <div class="sideTooltip">
                Your Profile
              </div>
            </button> 
          </a>
          <div class="profileNotification">
        <% if (currentUser) { %>
          <%= currentUser.buyingMessageFromLandbook.filter(m => !m.read).length + currentUser.sellingMessageFromLandbook.filter(m => !m.read).length + currentUser.claimedMessageFromLandbook.filter(m => !m.read).length + currentUser.buyingCartTimerId.length %>
        <% } else { %>
          0
        <% } %>
          </div>
        </div>
      </div>
      <div class="sideMiddleHeader">
        <form action="/home/search/basti/bastisadar" method="GET">
          <input type="text"  placeholder="Search Landbook" class="searchInput" required>
          <button class="searchButton" type="submit">
            <img src="/imagesAndVideos/Logos/Search Icon.svg" alt="">
            <div class="sideTooltip">
              Search
            </div>
          </button>
        </form>
        <button class="voiceButton" id="micBtnSide">
          <img src="/imagesAndVideos/Logos/voiceIcon1 (1).png" alt="">
          <div class="sideTooltip">
            Search with your voice
          </div>
        </button>
        <select id="languageSelectSide" class="language-select">
          <option value="en">ğŸŒ English</option>
          <option value="hi">ğŸŒ à¤¹à¤¿à¤¨à¥à¤¦à¥€</option>
          <option value="bn">ğŸŒ à¦¬à¦¾à¦‚à¦²à¦¾</option>
          <option value="ur">ğŸŒ Ø§Ø±Ø¯Ùˆ</option>
          <option value="ta">ğŸŒ à®¤à®®à®¿à®´à¯</option>
          <option value="te">ğŸŒ à°¤à±†à°²à±à°—à±</option>
          <option value="pa">ğŸŒ à¨ªà©°à¨œà¨¾à¨¬à©€</option>
          <option value="gu">ğŸŒ àª—à«àªœàª°àª¾àª¤à«€</option>
          <option value="ml">ğŸŒ à´®à´²à´¯à´¾à´³à´‚</option>
          <option value="mr">ğŸŒ à¤®à¤°à¤¾à¤ à¥€</option>
          <option value="it">ğŸŒ Italiano</option>
        </select>
      </div>
      
    </div>

  <!-- header container ends-->
  <% if(error.length > 0) { %>
    <div class="flash flash-error">
      <%= error %>
    </div>
  <% } %>
  <% if(success.length > 0) { %>
    <div class="flash flash-success">
      <%= success %>
    </div>
  <% } %>

  <!-- body containers -->
  <div class="container">

    <div class="containerUpperPortion">

      <div class="carousel-wrapper">
        <% if(bigProducts.length > 0) { %>
          <button class="arrow left" onclick="moveLeft()"> &#8592; </button>
        <% } %>
        <div class="carousel" id="carousel">
          <% if(bigProducts.length > 0) { %>
            <% bigProducts.forEach((bigProduct) => { %>
              <div class="carousel-item">
  
                <div class = "productsContainer">
                  <a href="/buy/viewproduct/<%= bigProduct._id %>/<%= bigProduct.city %>/<%= bigProduct.tehsil %>" class="productLink">
                    <div id = "<%= bigProduct._id %>">
                      <div class="productsImage">
                        <img src= "data:image/jpeg;base64, <%= bigProduct.productImages[0].toString('base64') %>" alt="product image">
                      </div>
                      <div class="productsPriceAndLB">
                        <div class= "productsPrice">
                          Price: <%= bigProduct.landbookPrice %> Lakhs.
                        </div>
                        <div class= "productsLB">
                          L * B: <%= bigProduct.LB %>
                        </div>
                      </div>
                      <div class="productsSpec">
                        <%= bigProduct.spec %>
                      </div>
                      <div class="productsStats">
                        <div class="productsVisit">
                          Times Visited: <%= bigProduct.visits %> &#183
                        </div>
                        <div class="productsRating">
                          <img src= "data:image/jpeg;base64, <%= bigProduct.ratingImage.toString('base64') %>">
                        </div>
                        <div class="productsClaim">
                          Claimed: <%= bigProduct.claimedPeople.length %> &#183
                        </div>
                      </div>
                      <div>
                        <a href="/buy/addtoclaim/<%= bigProduct._id %>/<%= bigProduct.city %>/<%= bigProduct.tehsil %>">
                          <button class= "claimToCartButton js-claim-to-cart"> 
                            Add to Claim Cart
                          </button>
                        </a> 
                      </div>
                    </div>
                  </a>
                </div>
              </div>
            <% }) %>
          <% } else { %>
            <div class="noProducts">
            </div>
          <% } %>

        </div>
        <% if(bigProducts.length > 0) { %>
          <button class="arrow right" onclick="moveRight()">&#8594;</button>
        <% } %>
      </div>

    </div>

    <div class="aboutPage">
      Hello, <% if (currentUser) { %><%= currentUser.name.toUpperCase() %><% } else { %> <% } %> You are on landbook.com. If you want to buy or sell your zameen(s) then landbook make it easy where you can buy and sell the zameen in easiest ways in the world with your phone.
    </div>

    <div class="top3Columns">

      <% if(topCityProducts.length > 0) { %>
        <% topCityProducts.forEach((cityProduct, index) => { %>
          <div class="tops<%= index + 1 %> dropdown-container" onclick="toggleDropdown()">
            <div class="placeAndPrice">
              <div class="textsTopFour">
                <%= formatName(cityProduct.city) %>
              </div>
              <% if(cityProduct.startingPrice) { %>
                <div class="startingPrices"> 
                  Starting Price: <%= cityProduct.startingPrice %> Lakhs
                </div>
              <% } else { %>
                <div class="startingPrices"> 
                  Coming soon @Landbook.
                </div>
              <% } %>
            </div>
            <div class="dropdown hidden">
              <% cityProduct.tehsils.forEach((tehsil) => { %>
                <a onclick="saveLastClick('Basti Sadar')" href="/home/<%= cityProduct.city %>/<%= tehsil %>" class="links specialLink"><%= formatName(tehsil) %></a>
              <% }) %>
            </div>
          </div>
        <% }) %>
      <% } else { %>
        <div class="tops2 dropdown-container" onclick="toggleDropdown()" title="city not available">
          <div class="placeAndPrice">
            <div class="textsTopFour">
              No city available right now.
            </div>
          </div>
        </div>
      <% } %>

      <!-- </a> -->

      <!-- <div class="tops">
        <div class="placeAndPrice">
          <div class="textsTopFour">
            Gautama Buddha Nagar
          </div>
          <div class="startingPrices">
            Starting Price. 24 Lakhs
          </div>
        </div>
      </div> -->
    </div>

    <!-- kind of advertising -->

    <div class="kindOfAdvertising">
      <div class="advertisement">
        <div class="scrolling-text">
          ğŸ¬ Landbook â€” The Easiest Way to Buy and Sell Land From Home...
            Welcome to Landbook â€” the easiest, fastest, and most transparent way to buy and sell land right from your home.

            Letâ€™s start with how simple it is to sell your land on Landbook.
            ---

            ğŸ  Selling Land on Landbook

              All you have to do is:
              1. Go to the main homepage. Image

              2. Select your city and tehsil. Image

              3. Head to the Selling Form page. Image

              4. Fill in some basic details â€” your price, seller info, and upload khatauni images of your land.

              5. Submit the formâ€¦ and thatâ€™s it!

              Once submitted, Landbook will verify your khatauni and, within next 10 hours, send a Landbook Cameraman to your location.
              The cameraman will capture detailed images and important nearby landmarks to make your property listing stand out. Video of cameraman clicking pictures. After verification, your land goes live on Landbook â€” ready for buyers all across the country to see! A site with landbook logo with land image with some texts about it  on that website ---

            ğŸŒ Buying Land on Landbook
              Buying is just as easy â€” and smarter than ever before.
              You can search for land in five powerful ways:
              1. ğŸ—ºï¸ Through Google Maps, where you can find properties directly on the map near you.

              2. ğŸ” Using the Search Bar, type names like â€œAwaas Vikasâ€ â€” and instantly see all lands near that location.
              3. ğŸ” Using the Voice search, ask names like â€œAwaas Vikasâ€ â€” and instantly see all lands near that location.

              4. ğŸ¡ By exploring the Sell Main Page, browsing cities and tehsils manually.

              5. ğŸ¯ And through Filters, where you can search by max price, rating, city, and tehsil. ---

            ğŸ’° Buying Options
              Now, when you find your perfect land, Landbook gives you two smart buying options:
              1ï¸âƒ£ Claim Cart
                If youâ€™ve found a land thatâ€™s perfect but youâ€™re not ready yet, just Add it to your Claim Cart.
                That means youâ€™re interested â€” and if someone else tries to buy that same land, Landbook will notify you.
                Also, Youâ€™ll get 6 to 7 hours to give your bayana (token money) and secure that land.
                To do this, youâ€™ll fill a simple Bayana Form on the Landbook website, then visit the land's tehsilâ€™s Landbook Queryhouse to pay manually.
                âš ï¸ No online payments are made through Landbook â€” everything is handled safely and directly to avoid any fraud.
                If you complete your bayana within your time, the land is yours!
                Otherwise, it moves to the next interested buyer. Users can know more about what claim cart really is in help page of Landbook. ---
              2ï¸âƒ£ Buy Within 72 Hours
                If youâ€™re serious and ready to buy fast â€” this is your option.
                Click on Buy Within 72 Hours, fill out the buying form, and Landbook will first give any claimed users their 6 to 7 hours to act.
                If no one claims it, your 65-hour fast pace buying window begins!
                Within this period, you just need to visit your Landbook Queryhouse, give your bayana manually, and the land is reserved in your name.
                From there, Landbook takes care of everything â€” from lawyer arrangements to khatauni work to final registration.
                The Landbook price already includes all costs from seller price to land registration, 2.3% landbook convenience cost â€” no hidden fees, no extra payments.
                You pay directly to Landbook Queryhouse, and Landbook ensures your seller gets their payment and your land is officially transferred to your name.
                Just like how a broker works â€” but safer, faster, and smarter.---
            ğŸŒŸ In Short
            Landbook brings the entire land market online â€”
            from listing to verification,
            from buying to signing,
            without the stress, confusion, or risk of fraud.

            Sell your land from home.
            Buy your dream property from anywhere.
            All verified, all transparent â€” only on Landbook.
            â€œLandbook â€” Buy and sell your land, fast and secure.â€ ğŸŒğŸ¡
        </div>
      </div>
      <div class="pickContainer">
        <div class="pickWhereYouLeftTitle">
          Pick Where you left: 
        </div>
        <a href="#" class="links pickLeftLink" id="last-visited-link">
          <div id="pick-up-container">
            <div id="last-visited-text"></div>
          </div>
        </a>
      </div>
    </div>
    

    <!-- search bar for searching states -->
    <!-- <div class="searchContainerInPage">
      <div class="searchStatesByName">
        <input type="text" placeholder="Search Districts" class="searchStatesBar">
      </div>
      <div class="searchStates-Button">
        <button class="searchStatesButton">
          <img src="/imagesAndVideos/Logos/Search Icon.svg" alt="">
        </button>
      </div>
    </div> -->

    <div class="horizontalLine"></div>

    <input type="text" id="searchBox" placeholder="Search city or tehsil" class="searchInputForStates"/>

    <!-- rest of states is in this container through js-->
    <div class="allStates">
      <% if(allCityProducts.length > 0) { %>
        <% allCityProducts.forEach((cityProduct, index) => { %>
          <div class="city-box">
            <div class="state<%= index + 1 %> dropdown-container" onclick="toggleDropdown()">
              <div class="placeAndPrice">
                <div class="cityName textsTopFour">
                  <%= formatName(cityProduct.city) %>
                </div>
                <% if(cityProduct.startingPrice) { %>
                  <div class="startingPrices"> 
                    Starting Price: <%= cityProduct.startingPrice %> Lakhs
                  </div>
                <% } else { %>
                  <div class="startingPrices"> 
                    Coming soon @Landbook.
                  </div>
                <% } %>
              </div>
              <div class="dropdown hidden">
                <% cityProduct.tehsils.forEach((tehsil) => { %>
                  <a onclick="saveLastClick('Basti Sadar')" href="/home/<%= cityProduct.city %>/<%= tehsil %>" class="links specialLink tehsilLink"><%= formatName(tehsil) %></a>
                <% }) %>
              </div>
            </div>
          </div>
        <% }) %>
      <% } else { %>
        <div class="state2 dropdown-container" onclick="toggleDropdown()" title="city not available">
          <div class="placeAndPrice">
            <div class="textsTopFour">
              No city available right now.
            </div>
          </div>
        </div>
      <% } %>
    </div> 

    
    <!-- container div end -->
  </div>


  <!-- footer container -->
  <footer>

    <div class="aboutThisPage">
      <div class="aboutThisPageLanguage">
        <div class="languageImage">
          ğŸŒ
        </div>
        <div class="languageText">
           English
        </div>  
      </div>

      <div class="aboutCountry">
        <div class="aboutCountryImage">
          <img src="/imagesAndVideos/images/1f1ee-1f1f3.png" alt="">
        </div>
        <div class="aboutCountryText">
           India
        </div>
      </div>
    </div>

    <div class="aboutCompany">
      <div class="companyConditions aboutCompanyTexts">
        Conditions of Use
      </div>
      <div class="companyPrivacyPolicy aboutCompanyTexts">
        Privacy Notice
      </div>
      <div class="aboutAdvertising aboutCompanyTexts">
        Interest-Based Ads
      </div>
    </div>

    <div class="companyCopywrite">
      .c. 1996-2024, Landbook.com, Inc. and its affiliates
    </div>

  </footer>

  <script>

    // for advertising text moving..
    // window.addEventListener('load', () => {
    //   const scrollText = document.querySelector('.scrolling-text');
    //   setTimeout(() => {
    //     scrollText.style.animation = 'scrollText 640s linear infinite';
    //   }, 3000)
    // });

    // for corousel working on arrows on PCs
    let carousel = document.getElementById('carousel');
    const scrollAmount = 300;

    // function updateCarousel() {
    //   carousel.style.transform = `translateX(-${currentIndex * 100}%)`;
    // }

    // for working carousel by pressing the left right button
    function moveLeft() {
      if(carousel.scrollLeft > 0) {
        carousel.scrollBy({left: -scrollAmount, behavior: "smooth"})
      }
    }
    function moveRight() {
      const maxScroll = carousel.scrollWidth - carousel.clientWidth
      if(carousel.scrollLeft < maxScroll) {
        carousel.scrollBy({left: scrollAmount, behavior: 'smooth'});
      }
    }

    // for carousel working on pressing arrow on keyboard....
    // document.addEventListener('keydown', (e) => {
    //   if(e.key === 'ArrowRight') {
    //     if(currentIndex < carousel.children.length - 1) {
    //       currentIndex++;
    //       updateCarousel();
    //     }
    //   } else if (e.key === 'ArrowLeft') {
    //     if(currentIndex > 0) {
    //       currentIndex--;
    //       updateCarousel();
    //     }
    //   }
    // });

    // carousel working on swiping eg. by touch
    // let startX = 0;
    // carousel.addEventListener('touchstart', (e) => {
    //   startX = e.touches[0].clientX;
    // });

    // carousel.addEventListener('touchend', (e) => {
    //   let endX = e.changedTouches[0].clientX;
    //   let diff = startX - endX;

    //   if(diff > 50 && currentIndex < carousel.children.length -1) {
    //     currentIndex++;
    //     updateCarousel();
    //   } else if (diff < -50 && currentIndex > 0) {
    //     currentIndex--;
    //     updateCarousel();
    //   }
    // });

    
    // for cities dropdown starts here
    document.querySelectorAll('.dropdown-container').forEach(container => {
      container.addEventListener('click', (e) => {
        const dropdown = container.querySelector('.dropdown');
        dropdown.classList.toggle('hidden');
        e.stopPropagation();
      });
    });
    document.addEventListener('click', (event) => {
      document.querySelectorAll('.dropdown').forEach(drop => {
        if(!drop.classList.contains('hidden')) {
          drop.classList.add('hidden')
        }
      });
    });
    // for cities dropdown ends here

    // when any link is clicked, store its href
    document.addEventListener('DOMContentLoaded', () => {
      const allLinks = document.querySelectorAll('.links');

      allLinks.forEach(link => {
        link.addEventListener('click', () => {
          localStorage.setItem('lastVisitedLink', link.href);
          localStorage.setItem('lastVisitedText', link.textContent.trim());
        });
      });
    });

// voice search starts
document.addEventListener("DOMContentLoaded", () => {
  const micButtons = [
    document.getElementById("micBtnMain"),
    document.getElementById("micBtnSide")
  ];

  const overlay = document.getElementById("voiceOverlay");
  const voiceText = document.getElementById("voiceText");
  const searchInput = document.getElementById("searchInput");
  const searchForm = document.getElementById("searchForm");

  let recognition;

  if ("webkitSpeechRecognition" in window) {
    recognition = new webkitSpeechRecognition();
    recognition.continuous = false;
    recognition.interimResults = true;
    recognition.lang = "en-IN"; // You can change to "hi-IN" for Hindi
  }

  function startVoiceSearch() {
    if (!recognition) return alert("Your browser does not support voice search.");

    voiceText.innerHTML = "Listening...";
    overlay.style.display = "block";

    recognition.start();

    recognition.onresult = (event) => {
      let finalText = "";
      let interimText = "";

      for (let i = 0; i < event.results.length; i++) {
        if (event.results[i].isFinal) {
          finalText += event.results[i][0].transcript;
        } else {
          interimText += event.results[i][0].transcript;
        }
      }

      // Show live text in bubble
      voiceText.innerHTML = interimText || finalText;
    };

    recognition.onend = () => {
      // Use whatever text was last spoken
      const spokenText = voiceText.innerHTML.trim();

      overlay.style.display = "none"; // Hide bubble

      if (spokenText.length > 0) {
        searchInput.value = spokenText; // put text in input
        searchForm.submit(); // auto-search
      }
    };
  }

  // Attach to BOTH mic buttons
  micButtons.forEach(btn => {
    if (btn) {
      btn.addEventListener("click", startVoiceSearch);
    }
  });
});
// voice search ends



    // for pick where you left...
    // to make pick where you left working...
    const link = document.getElementById('last-visited-link');
    const label = document.getElementById('last-visited-text');
    const lastHref = localStorage.getItem('lastVisitedLink');
    const lastText = localStorage.getItem('lastVisitedText');

    if(lastHref && lastText) {
      link.href = lastHref;
      label.textContent = lastText
    }
    function saveLastClick() {
      localStorage.setItem('lastVisitedLinkText', linkText);
    }

    // for searching cities...
    const searchBox = document.getElementById('searchBox');
    const cityBoxes = document.querySelectorAll('.city-box');

    searchBox.addEventListener('input', () => {
      const value = searchBox.value.trim().toLowerCase();
      cityBoxes.forEach(box => {
        const cityNameElement = box.querySelector('.cityName');
        const tehsilLinks = Array.from(box.querySelectorAll('.tehsilLink'));
        const cityName = cityNameElement ? cityNameElement.textContent.toLowerCase() : '';
        const tehsilNames = tehsilLinks.map(link => link.textContent.toLowerCase());
        const matchCity = cityName.includes(value);
        const matchTehsil = tehsilNames.some(name => name.includes(value));
        if(matchCity || matchTehsil) {
          box.style.display = 'block';
        } else {
          box.style.display = 'none';
        }
      });
    });

    function toggleSidebar() {
      document.getElementById('sidebar').classList.toggle('active');
    }

    // for language translation
    // for new language translation
(function() {
  const SELECT_IDS = ['languageSelectMain', 'languageSelectSide']; // IDs of both dropdowns
  const STORAGE_KEY = 'preferredLanguage';
  const defaultSourceLang = 'en';

  function setCookie(name, value, days, path = '/') {
    const d = new Date();
    d.setTime(d.getTime() + (days*24*60*60*1000));
    document.cookie = `${name}=${value};expires=${d.toUTCString()};path=${path}`;
  }

  function getCookie(name) {
    const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
    return match ? decodeURIComponent(match[2]) : null;
  }

  function currentLangFromCookie() {
    const c = getCookie('googtrans');
    if (!c) return defaultSourceLang;
    const parts = c.split('/');
    return parts[2] || defaultSourceLang;
  }

  function trySetComboLang(lang) {
    const combo = document.querySelector('.goog-te-combo');
    if (combo) {
      if (combo.value !== lang) {
        combo.value = lang;
        combo.dispatchEvent(new Event('change'));
        console.log('Translate combo switched â†’', lang);
      } else {
        console.log('Language already active â†’', lang);
      }
      return true;
    }
    return false;
  }

  function fallbackSetLang(lang) {
    try {
      setCookie('googtrans', `/${defaultSourceLang}/${lang}`, 365, '/');
      setCookie('googtrans', `/${defaultSourceLang}/${lang}`, 365, '/');
      window.location.reload();
    } catch (e) {
      console.error('fallbackSetLang error', e);
    }
  }

  function setLanguage(lang) {
    localStorage.setItem(STORAGE_KEY, lang);
    const current = currentLangFromCookie();
    if (current === lang) {
      console.log('Skip re-translate (already', lang, ')');
      return;
    }

    let attempts = 0;
    const maxAttempts = 25;
    const interval = setInterval(() => {
      attempts++;
      const done = trySetComboLang(lang);
      if (done) {
        clearInterval(interval);
        return;
      }
      if (attempts >= maxAttempts) {
        clearInterval(interval);
        console.warn('Combo not found, fallback to cookie');
        fallbackSetLang(lang);
      }
    }, 100);
  }

  function initSelectors() {
    // get both selects
    const selects = SELECT_IDS.map(id => document.getElementById(id)).filter(Boolean);
    if (!selects.length) return;

    // restore saved
    const saved = localStorage.getItem(STORAGE_KEY);
    if (saved) {
      selects.forEach(sel => sel.value = saved);
      const current = currentLangFromCookie();
      if (current !== saved) {
        setLanguage(saved);
      }
    }

    // listen for changes on each select
    selects.forEach(sel => {
      sel.addEventListener('change', function() {
        const lang = this.value;

        // sync both dropdowns instantly
        selects.forEach(s => {
          if (s.value !== lang) s.value = lang;
        });

        // apply and save language
        setLanguage(lang);
      });
    });
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initSelectors);
  } else {
    initSelectors();
  }
})();

  </script>
  
</body>

</html>