<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>login page</title>
  <link rel="stylesheet" href="/stylesheets/homePagesCSS/loginPage.css">
  <link rel="icon" type="image/png" href="/banner2.png">

<!-- google translate hidden element (head) -->
<div id="google_translate_element" style="display:none;"></div>

<script>
  function googleTranslateElementInit() {
    new google.translate.TranslateElement({
      pageLanguage: 'en',
      includedLanguages: 'en,hi,bn,ur,ta,te,pa,gu,ml,mr,it',
      autoDisplay: false,
    }, 'google_translate_element');
      // for movement of main-navbar to some bottom...
  function checkGoogleTranslateBanner() {
    const banner = document.querySelector('.goog-te-banner-frame');
    const body = document.body;
    if(banner && banner.style.display !== 'none') {
      body.classList.add('translate-active');
    } else {
      body.classList.remove('translate-active');
    }
  }
  const observer = new MutationObserver(checkGoogleTranslateBanner);
  observer.observe(document.body, { childList: true, subtree: true });
  setInterval(checkGoogleTranslateBanner, 1000);
  }

  
</script>
<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

</head>
<body>

  <div class="header">
    <div class="headerTitle">
      Welcome to <span>landbook.com</span>
    </div>
  </div>
  <div class="pageHeading">
    Sign up / Login / Logout page
  </div>


  <div class="aboutContainer">
    <div class="about1">
      This is the page by <span class="logo">Landbook</span> where customers can either Sign up/ login/ logout
    </div>
    <div class="skipLink">
      <div class="link">
        <a href="/home/landbook">Skip for now</a> 
      </div>
    </div>
    <div class="about2">
      Customers can <span class="skip">skip</span> login/ sign up also for now but in some regions of the <span class="logo">landbook.com</span> you'll need to login then you'll be able to use nearly all convenience of landbook. So, in order to lack inconvenience when try to do importact drilling in Landbook hurry up and login now... 
    </div>
  </div>

  <div class="logout">
    <a href="/home/userlogout" class="logoutLink">Logout</a>
  </div>  

  <% if(error.length > 0) { %>
    <div class="flash flash-error">
      <%= error %>
    </div>
  <% } %>
  <% if(success.length > 0) { %>
    <div class="flash flash-success">
      <%= success %>
    </div>
  <% } %>

  <div class="container">

    <div class="loginBox">
      <div class="title">
        Login
      </div>
      <form action="/home/userlogin" method="post" onsubmit="return validatePassword()">
        <input type="text" placeholder="Enter username" class="username" name="username" required>
        <input id="password" minlength="5" type="password" placeholder="Enter your password" class="password" name="password" required>
        <a href="/us/user/forgotPass" class="forgotPass">
          forgot password?
        </a>
        <input type="submit" value="Login" class="login">
      </form>
    </div>

    <div class="signUpBox">
      <div class="title">
        Sign up
      </div>
      <form action="/home/usersignup" method="post" id="signupForm" onsubmit="return validatePassword()">
        <input type="text" placeholder="Enter your name" class="name" name="name" required>
        <input type="userName" placeholder="Enter your username" class="username" name="username" required>
        <input type="number" placeholder="Your correct contact number" class="number" name="contactNumber" required>
        <input type="email" placeholder="abc@gmail.com" class="email" name="email" required>

        <input type="password" id="password" minlength="5" placeholder="Create password" class="password" name="password" required>

        <input type="password" minlength="5" placeholder="Re-enter Password" class="password" id="confirmPassword" name="confirmPassword" required>

        <div id="message"></div> <br>
        <span id="errorMsg" style="color: red; display: block;"></span>
        <input type="submit" value="Sign Up" class="signUp">
      </form>
    </div>
    
  </div>

  <div class="footer">
    <div class="footers">
      <a href="/home/aboutus" class="footerLinks">
        Contact us
      </a>
    </div>
    <div class="footers">
      <a href="/home/newaboutus" class="footerLinks">
        About us
      </a>
    </div>
  </div>

  <script>
    function validatePassword() {
      const input = document.getElementById('password');
      const errorMsg = document.getElementById('errorMsg');
      if(input.value.length > 5) {
        errorMsg.textContent = 'Password must be at least 5 characters long.';
        return false;
      }
      return true;
    }

    // for language translation
    // for new language translation
    (function() {
      const SELECT_ID = 'languageSelect';
      const STORAGE_KEY = 'preferredLanguage';
      const defaultSourceLang = 'en';

      function setCookie(name, value, days, path = '/') {
        const d = new Date();
        d.setTime(d.getTime() + (days*24*60*60*1000));
        document.cookie = `${name}=${value};expires=${d.toUTCString()};path=${path}`;
      }

      function getCookie(name) {
        const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
        return match ? decodeURIComponent(match[2]) : null;
      }

      // Extract target language from googtrans cookie ("/en/hi" → "hi")
      function currentLangFromCookie() {
        const c = getCookie('googtrans');
        if (!c) return defaultSourceLang;
        const parts = c.split('/');
        return parts[2] || defaultSourceLang;
      }

      function trySetComboLang(lang) {
        const combo = document.querySelector('.goog-te-combo');
        if (combo) {
          if (combo.value !== lang) {
            combo.value = lang;
            combo.dispatchEvent(new Event('change'));
            console.log('Translate combo switched →', lang);
          } else {
            console.log('Language already active →', lang);
          }
          return true;
        }
        return false;
      }

      function fallbackSetLang(lang) {
        try {
          setCookie('googtrans', `/${defaultSourceLang}/${lang}`, 365, '/');
          setCookie('googtrans', `/${defaultSourceLang}/${lang}`, 365, '/');
          window.location.reload();
        } catch (e) {
          console.error('fallbackSetLang error', e);
        }
      }

      function setLanguage(lang) {
        localStorage.setItem(STORAGE_KEY, lang);

        // prevent loop if already same language
        const current = currentLangFromCookie();
        if (current === lang) {
          console.log('Skip re-translate (already', lang, ')');
          return;
        }

        let attempts = 0;
        const maxAttempts = 25;
        const interval = setInterval(() => {
          attempts++;
          const done = trySetComboLang(lang);
          if (done) {
            clearInterval(interval);
            return;
          }
          if (attempts >= maxAttempts) {
            clearInterval(interval);
            console.warn('Combo not found, fallback to cookie');
            fallbackSetLang(lang);
          }
        }, 100);
      }

      function initSelector() {
        const sel = document.getElementById(SELECT_ID);
        if (!sel) return;

        // restore saved
        const saved = localStorage.getItem(STORAGE_KEY);
        if (saved) {
          sel.value = saved;
          const current = currentLangFromCookie();
          if (current !== saved) {
            setLanguage(saved);
          }
        }

        sel.addEventListener('change', function() {
          const lang = this.value;
          setLanguage(lang);
        });
      }

      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initSelector);
      } else {
        initSelector();
      }
    })()

  </script>
  <select id="languageSelect language-select" hidden>
    <option value="en">English</option>
    <option value="hi">हिन्दी</option>
    <option value="bn">বাংলা</option>
    <option value="ur">اردو</option>
    <option value="ta">தமிழ்</option>
    <option value="te">తెలుగు</option>
    <option value="pa">ਪੰਜਾਬੀ</option>
    <option value="gu">ગુજરાતી</option>
    <option value="ml">മലയാളം</option>
    <option value="mr">मराठी</option>
    <option value="it">Italiano</option>
  </select>

</body>
</html>